(this["webpackJsonpdodoli-webapp"]=this["webpackJsonpdodoli-webapp"]||[]).push([[0],{15:function(e,t,a){},35:function(e,t,a){e.exports=a(58)},58:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(28),l=a.n(s),o=(a(15),a(3)),c=a(4),i=a(6),m=a(5),d=a(7),u=a(32),p=a(16),h=a(29),E=a.n(h),f=(a(46),a(12)),g=a.n(f),v=a(18),b="https://api.dodoli.net",y=a(19),w=a.n(y),O=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLogin:!1},a.checkIsLogin=Object(v.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("token")){e.next=3;break}return a.setState({isLogin:!1}),e.abrupt("return");case 3:return t={"Content-Type":"application/json","x-access-token":localStorage.getItem("token")||"null"},e.next=6,w.a.v4();case 6:return e.t0=e.sent,n={publicip:e.t0},e.next=10,fetch(b+"/auth/verify",{method:"POST",body:JSON.stringify(n),headers:t}).then((function(e){return e.json()})).then((function(e){if(!e.userid)return localStorage.setItem("token",""),void sessionStorage.setItem("userid","");a.setState({isLogin:!0}),sessionStorage.setItem("userid",e.userid)}));case 10:case"end":return e.stop()}}),e)}))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.checkIsLogin()}},{key:"render",value:function(){var e=r.a.createElement("span",null,r.a.createElement("a",{className:"Module-loginbutton",href:"/register"},"Register"),r.a.createElement("a",{className:"Module-loginbutton",href:"/login"},"Login")),t=r.a.createElement("span",null,r.a.createElement("a",{className:"Module-loginbutton",href:"/logout"},"Logout"),r.a.createElement("a",{className:"Module-loginbutton",href:"/mypage"},"My page"));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Background-header"},r.a.createElement("div",null,r.a.createElement("a",{className:"Module-mainlogo",href:"/"},"dodol:i"),this.state.isLogin?t:e),r.a.createElement("br",null)))}}]),t}(n.Component),k=function(e){function t(e){var a;return Object(o.a)(this,t),a=Object(i.a)(this,Object(m.a)(t).call(this,e)),document.title="dodoli.net",a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"Style-center"},r.a.createElement("div",null,r.a.createElement("p",{className:"Blank-small"}),r.a.createElement("p",{className:"Text-medium"},"\ud558\ub8e8\ub97c \ub418\ub3cc\uc544\ubd10\uc694"),r.a.createElement("p",{className:"Text-xlarge Text-bold"},"dodol:i"),r.a.createElement("p",{className:"Text-small Text-light"},"\uc5ec\uae30\uc5d0\ub294 \uc544\ub9c8 \uc0ac\uc9c4\uc774 \ub4e4\uc5b4\uac08 \uac83\uc785\ub2c8\ub2e4")),r.a.createElement("div",null)))}}]),t}(n.Component),j=a(17),x=a(62),N=a(60),S=a(61),C=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isHinder:!0,id:"",password:"",errorMessage:""},a.handleHinder=function(){a.setState({isHinder:!a.state.isHinder})},a.handleLogin=Object(v.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a.state.id,e.t1=a.state.password,e.next=4,w.a.v4();case 4:e.t2=e.sent,t={uid:e.t0,password:e.t1,publicip:e.t2},n={"Content-Type":"application/json"},fetch(b+"/auth/",{method:"POST",body:JSON.stringify(t),headers:n}).then((function(e){return e.json()})).then((function(e){e.token?(localStorage.setItem("token",e.token.toString()),window.location.replace("/")):a.setState({errorMessage:e.message})}));case 8:case"end":return e.stop()}}),e)}))),a.handleChange=function(e){var t;a.setState((t={},Object(j.a)(t,e.target.name,e.target.value),Object(j.a)(t,"errorMessage",""),t))},a.handleEnterKey=function(e){13===e.keyCode&&a.handleLogin()},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"Style-center"},r.a.createElement("p",{className:"Blank-small"}),r.a.createElement("p",{className:"Text-large Text-bold"},"Login"),r.a.createElement("p",{className:"Blank-xsmall"}),r.a.createElement("div",{className:"Module-input w-auto"},r.a.createElement(x.a,null,r.a.createElement(N.a,{placeholder:"ID",type:"text",size:"lg",value:this.state.id,onChange:this.handleChange,onKeyDown:this.handleEnterKey,name:"id"})),r.a.createElement("div",{className:"Blank-xxsmall"}),r.a.createElement(x.a,null,r.a.createElement(N.a,{placeholder:"Password",type:this.state.isHinder?"password":"text",size:"lg",value:this.state.password,onChange:this.handleChange,onKeyDown:this.handleEnterKey,name:"password"}),r.a.createElement(x.a.Append,null,r.a.createElement(S.a,{onClick:this.handleHinder},this.state.isHinder?"\ubcf4\uc774\uae30":"\uc228\uae30\uae30")))),r.a.createElement("p",{className:"Blank-xsmall"}),this.state.errorMessage?r.a.createElement("span",{className:"Module-errormessage"},this.state.errorMessage):r.a.createElement("span",{style:{color:"white"}},"\xa0"),r.a.createElement("div",{className:"Module-buttonstyle"},r.a.createElement("p",{className:"Module-button",onClick:this.handleLogin},r.a.createElement("span",null,"Login")))))}}]),t}(n.Component),M=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Style-center Style-overflow-hidden"},r.a.createElement("div",null,r.a.createElement("p",{className:"Module-notfoundmove"}),r.a.createElement("p",{className:"Module-notfound"},"\xa0404\xa0")),r.a.createElement("p",{className:"Module-notfoundmove"}),r.a.createElement("p",{className:"Text-medium"}," Not found"),r.a.createElement("div",{className:"Module-not"}),r.a.createElement("p",{className:"Text-xsmall"},r.a.createElement("code",null,"\ubb34\uc5c7\uc744 \ucc3e\uc544 \ud5e4\uba54\ub358 \uac83\uc77c\uae4c"))))}}]),t}(n.Component),L=a(59),B=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){localStorage.removeItem("token"),sessionStorage.removeItem("userid"),window.location.replace("/")}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Style-center"},r.a.createElement(L.a,{style:{marginTop:"10rem",marginBottom:"3rem"},animation:"border"}),r.a.createElement("h3",null,"Logging out..")))}}]),t}(n.Component),T=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,"div"))}}]),t}(n.Component);function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(a,!0).forEach((function(t){Object(j.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var I=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={id:"",password:"",passwordCheck:"",nickname:"",email:"",isLoading:!1,formErrors:{id:"",password:"",nickname:"",email:""}},a.handleChange=function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,e.next=3,a.setState(Object(j.a)({},n.name,t.target.value));case 3:a.verifyForm(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.verifyForm=function(e){switch(e.name){case"id":return e.value.length<4?void a.setState({formErrors:P({},a.state.formErrors,{id:"\uc544\uc774\ub514\ub294 4\uae00\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4."})}):(a.setState({formErrors:P({},a.state.formErrors,{id:""})}),void a.handleOverlap(e));case"password":case"passwordCheck":var t=new RegExp(/^((?=\S*?[a-z])(?=\S*?[0-9]).{5,})\S$/);return"password"!==e.name||t.test(e.value)?a.state.password!==a.state.passwordCheck?void a.setState({formErrors:P({},a.state.formErrors,{password:"\ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."})}):void a.setState({formErrors:P({},a.state.formErrors,{password:""})}):void a.setState({formErrors:P({},a.state.formErrors,{password:"\uc601\ubb38\uacfc \uc22b\uc790\ub97c \ud3ec\ud568\ud55c 6\uae00\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4."})});case"nickname":a.handleOverlap(e);break;case"email":if(!new RegExp(/^(?:[a-zA-Z0-9])([-_0-9a-zA-Z]+(\.[-_0-9a-zA-Z]+)*|^\"([\001-\010\013\014\016-\037!#-\[\]-\177]|\\[\001-011\013\014\016-\177])*\")@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}\.?$/).test(a.state.email)){a.setState({formErrors:P({},a.state.formErrors,{email:"\uc815\ud655\ud55c \uc774\uba54\uc77c\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."})});break}a.setState({formErrors:P({},a.state.formErrors,{email:""})}),a.handleOverlap(e);break;default:return}},a.handleRegister=function(){if(a.setState({isLoading:!0}),a.state.formErrors.email||a.state.formErrors.id||a.state.formErrors.nickname||a.state.formErrors.password)return alert("\uc798\ubabb \uc785\ub825\ub41c \uc815\ubcf4\ub97c \ub2e4\uc2dc \ud655\uc778\ud558\uc138\uc694."),void a.setState({isLoading:!1});if(!a.state.email||!a.state.id||!a.state.nickname||!a.state.password)return alert("\ube44\uc5b4\uc788\ub294 \uc815\ubcf4\uac00 \uc788\uc2b5\ub2c8\ub2e4."),void a.setState({isLoading:!1});var e={uid:a.state.id,password:a.state.password,nickname:a.state.nickname,email:a.state.email};fetch(b+"/user/",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){switch(e.status){case 400:return alert("Error 400 : "+e.message),void a.setState({isLoading:!1});case 422:return alert("Error 422 : "+e.message),void a.setState({isLoading:!1,formErrors:P({},a.state.formErrors,{id:"\ub2e4\ub978 \uc544\uc774\ub514\ub85c \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."}),id:""});case 500:return alert("Error 500 : "+e.message),void a.setState({isLoading:!1})}if(!0===e.state)return alert("\ud68c\uc6d0\uac00\uc785\uc5d0 \uc131\uacf5\ud588\uc2b5\ub2c8\ub2e4."),void window.location.replace("/login")}))},a.handleOverlap=function(e){var t={type:e.name,content:e.value};fetch(b+"/user/overlap/",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){400===t.status&&alert("Client Error : "+t.message),!0!==t.overlap?a.setState({formErrors:P({},a.state.formErrors,Object(j.a)({},e.name,""))}):a.setState({formErrors:P({},a.state.formErrors,Object(j.a)({},e.name,"\uc774\ubbf8 \uc0ac\uc6a9\uc911\uc785\ub2c8\ub2e4."))})}))},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Style-center"},r.a.createElement("div",{className:"Blank-small"}),r.a.createElement("p",{className:"Text-bold Text-large"},"Register"),r.a.createElement("div",{className:"Blank-xsmall"}),r.a.createElement("div",{className:"Module-input"},r.a.createElement(N.a,{placeholder:"ID",type:"id",size:"lg",value:this.state.id,onChange:this.handleChange,name:"id"}),r.a.createElement("div",{className:"Blank-xxsmall"}),this.state.formErrors.id?r.a.createElement("span",{className:"Module-errormessage"},this.state.formErrors.id):r.a.createElement("span",{style:{color:"white"}},"\xa0"),r.a.createElement("div",{className:"Blank-xxsmall"}),r.a.createElement(N.a,{placeholder:"Password",type:"password",size:"lg",value:this.state.password,onChange:this.handleChange,name:"password"}),r.a.createElement("div",{className:"Blank-xxsmall"}),r.a.createElement(N.a,{placeholder:"Verify password",type:"password",size:"lg",value:this.state.passwordCheck,onChange:this.handleChange,name:"passwordCheck"}),r.a.createElement("div",{className:"Blank-xxsmall"}),this.state.formErrors.password?r.a.createElement("span",{className:"Module-errormessage"},this.state.formErrors.password):r.a.createElement("span",{style:{color:"white"}},"\xa0"),r.a.createElement("div",{className:"Blank-xxsmall"}),r.a.createElement(N.a,{placeholder:"Nickname",type:"name",size:"lg",value:this.state.nickname,onChange:this.handleChange,name:"nickname"}),r.a.createElement("div",{className:"Blank-xxsmall"}),this.state.formErrors.nickname?r.a.createElement("span",{className:"Module-errormessage"},this.state.formErrors.nickname):r.a.createElement("span",{style:{color:"white"}},"\xa0"),r.a.createElement("div",{className:"Blank-xxsmall"}),r.a.createElement(N.a,{placeholder:"Email",type:"email",size:"lg",value:this.state.email,onChange:this.handleChange,name:"email"}),r.a.createElement("div",{className:"Blank-xxsmall"}),this.state.formErrors.email?r.a.createElement("span",{className:"Module-errormessage"},this.state.formErrors.email):r.a.createElement("span",{style:{color:"white"}},"\xa0"),r.a.createElement("div",{className:"Blank-xxsmall"}),r.a.createElement(S.a,{size:"lg",variant:"warning",onClick:this.handleRegister,disabled:this.state.isLoading},this.state.isLoading?"Loading...":"\ud68c\uc6d0 \uac00\uc785"))))}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(o.a)(this,t),a=Object(i.a)(this,Object(m.a)(t).call(this,e)),document.title="\ube48\uc131\ud558\uc138\uc694 - dodol:i",a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(E.a,null,r.a.createElement(O,null)),r.a.createElement(u.a,null,r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:k}),r.a.createElement(p.a,{exact:!0,path:"/login",component:C}),r.a.createElement(p.a,{exact:!0,path:"/logout",component:B}),r.a.createElement(p.a,{exact:!0,path:"/post",component:T}),r.a.createElement(p.a,{exact:!0,path:"/register",component:I}),r.a.createElement(p.a,{component:M})),r.a.createElement("div",{className:"App"})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(55).config(),l.a.render(r.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.bfbf5a1c.chunk.js.map